<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="robots" content="noindex, nofollow" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Log In - Jumpshare</title>
		<meta
			name="description"
			content="Jumpshare helps you and your team communicate better with screen recordings, screenshots, GIFs, file sharing, and more, all in one platform."
		/>
		<!-- Favicon -->
		<link
			rel="icon"
			href="https://jumpshare.fltr.club/assets/favicon.ico"
			type="image/x-icon"
		/>
		<link
			rel="icon"
			href="https://jumpshare.fltr.club/assets/favicon.png"
			type="image/png"
		/>
		<link
			rel="apple-touch-icon"
			href="https://jumpshare.fltr.club/assets/favicon.png"
		/>

		<!-- Open Graph meta tags -->
		<meta property="og:title" content="Log In - Jumpshare" />
		<meta
			property="og:description"
			content="Jumpshare helps you and your team communicate better with screen recordings, screenshots, GIFs, file sharing, and more, all in one platform."
		/>
		<meta
			property="og:image"
			content="https://jumpshare.fltr.club/assets/og_image.png"
		/>
		<meta property="og:url" content="https://jumpshare.fltr.club/" />
		<meta property="og:type" content="website" />
		<meta property="og:site_name" content="Jumpshare" />

		<!-- Optional: Twitter Card meta tags -->
		<meta
			name="twitter:card"
			content="https://jumpshare.fltr.club/assets/og_image.png"
		/>
		<meta name="twitter:title" content="Log In - Jumpshare" />
		<meta
			name="twitter:description"
			content="Jumpshare helps you and your team communicate better with screen recordings, screenshots, GIFs, file sharing, and more, all in one platform."
		/>
		<meta name="twitter:image" content="./assets/og_image.png" />

		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,100..900&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="./dist/output.css" />
	</head>

	<body>
		<main class="main-body bg-gray-100">
			<!-- Main Section -->
			<section class="relative min-h-screen">
				<div class="container pt-[1.5875rem]">
					<a href="/" class="cursor-pointer inline-block">
						<img
							loading="lazy"
							class="max-h-7"
							src="../assets/images/logo.svg"
							alt="Jumpshare"
						/>
					</a>
					<div class="flex flex-col items-center py-8 max-sm:py-6">
						<div
							class="shadow-card-white p-10 pb-7.5 rounded-2xl bg-white max-w-[460px] w-full max-sm:pt-7.5 max-sm:px-5 max-sm:pb-5"
						>
							<h1 class="h3 mb-4 text-center max-sm:mb-3">Sign In with SSO</h1>
							<form action="#" method="POST" class="mt-6.5 max-sm:mt-6">
								<div class="flex-grow relative mb-5">
									<input
										id="email"
										type="text"
										placeholder=" "
										class="peer border border-gray-600 text-sm rounded-md h-12 px-5 py-3 w-full text-blue-900 outline-none focus:border-blue-500 hover:border-gray-700"
										required
									/>
									<label
										for="email"
										class="absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none mb-3 text-sm font-medium font-sans-variable text-blue-900/60 transition-all duration-100 bg-white px-1.5 peer-focus:top-0 peer-valid:top-0 peer-[&:not(:placeholder-shown)]:top-0 peer-[&:not(:placeholder-shown)]:scale-75 peer-focus:text-blue-500 peer-focus:scale-75 peer-valid:scale-75 origin-left"
									>
										Email address
									</label>
								</div>
								<button class="btn btn-primary w-full btn-m text-sm">
									Sign In
								</button>
								<div class="mt-6 flex justify-center">
									<a
										href="/login"
										class="text-blue-500 hover:underline text-[0.875rem] font-medium"
									>
										Back to Sign in
									</a>
								</div>
							</form>
						</div>
					</div>
				</div>
			</section>
		</main>
		<script>
			'use strict'
			document.addEventListener('DOMContentLoaded', () => {
				// Lazy images
				const lazyImages = document.querySelectorAll('.lazy-image')
				console.log(lazyImages)

				if ('IntersectionObserver' in window) {
					const imageObserver = new IntersectionObserver(
						(entries, observer) => {
							entries.forEach(entry => {
								if (entry.isIntersecting) {
									const img = entry.target
									img.src = img.getAttribute('data-src')
									img.srcset = img.getAttribute('data-srcset')
									img.classList.remove('lazy-image')
									observer.unobserve(img)
								}
							})
						},
						{
							rootMargin: '1500px', // Loading the image 1500px before it is visible
						}
					)

					lazyImages.forEach(image => {
						imageObserver.observe(image)
					})
				} else {
					// For older browsers that do not support IntersectionObserver
					lazyImages.forEach(img => {
						img.src = img.getAttribute('data-src')
						img.srcset = img.getAttribute('data-srcset')
						img.classList.remove('lazy-image')
					})
				}

				// Password
				const passwordInput = document.getElementById('password')
				const requirementPar = document.getElementById('requirement-par')
				const showPasswordButton = document.getElementById('show-password')
				const passwordLevel = document.getElementById('password-level')
				const passwordCorrectLine = document.querySelector(
					'#password-correct-line'
				)

				showPasswordButton.addEventListener('click', () => {
					const isActive = showPasswordButton.classList.toggle('active')
					passwordInput.type = isActive ? 'text' : 'password'
					const icons = showPasswordButton.querySelectorAll('svg')

					if (isActive) {
						icons[0].classList.add('hidden')
						icons[1].classList.remove('hidden')
					} else {
						icons[1].classList.add('hidden')
						icons[0].classList.remove('hidden')
					}
				})

				const symbolRegex = /[!@#$%^&*(),.?":{}|<>]/
				const uppercaseRegex = /[A-Z]/
				const lowercaseRegex = /[a-z]/
				const numberRegex = /[0-9]/

				let requirements = {
					length: 'to be at least 8 characters',
					symbol: 'a symbol',
					uppercase: 'uppercase letter',
					lowercase: 'lowercase letter',
					number: 'a number',
				}

				function setPasswordValidProgress(
					toggle = 'add',
					prevClassLine,
					nextClassLine,
					prevClassText,
					nextClassText,
					text
				) {
					if (toggle === 'add') {
						passwordCorrectLine.classList.remove(...prevClassLine)
						passwordCorrectLine.classList.add(...nextClassLine)
						passwordLevel.innerText = text
						passwordLevel.classList.remove(prevClassText)
						passwordLevel.classList.add(nextClassText)
					} else {
						passwordCorrectLine.classList.remove(
							...prevClassLine,
							...nextClassLine
						)
						passwordLevel.classList.remove(prevClassText, nextClassText)
						passwordLevel.innerText = text
					}
				}

				function updateRequirementText() {
					if (passwordInput.value.length <= 0) {
						document.getElementById('requirement-block').style.maxHeight = 0
					} else {
						document.getElementById('requirement-block').style.maxHeight =
							63 + 'px'
					}

					let requirementArray = []

					if (passwordInput.value.length < 8) {
						requirementArray.push(requirements.length)
					}
					if (!symbolRegex.test(passwordInput.value)) {
						requirementArray.push(requirements.symbol)
					}
					if (!uppercaseRegex.test(passwordInput.value)) {
						requirementArray.push(requirements.uppercase)
					}
					if (!lowercaseRegex.test(passwordInput.value)) {
						requirementArray.push(requirements.lowercase)
					}
					if (!numberRegex.test(passwordInput.value)) {
						requirementArray.push(requirements.number)
					}

					if (requirementArray.length === 0) {
						setPasswordValidProgress(
							'add',
							['w-1/2', 'w-2/3', '!bg-yellow-700'],
							['w-full', '!bg-green-400'],
							'!text-yellow-700',
							'!text-green-400',
							'Strong'
						)
						passwordInput.classList.add('!border-green-400')
						passwordInput.classList.remove('!border-yellow-700')
						passwordInput.nextElementSibling.classList.add('!text-green-400')
						passwordInput.nextElementSibling.classList.remove(
							'!text-yellow-700',
							'!text-red-500'
						)
					} else if (requirementArray.length === 2) {
						setPasswordValidProgress(
							'add',
							['w-full', 'w-2/3', '!bg-green-400'],
							['w-1/2', '!bg-yellow-700'],
							'!text-green-400',
							'!text-yellow-700',
							'Fair'
						)
						passwordInput.classList.remove(
							'!border-green-400',
							'!border-red-500'
						)
						passwordInput.classList.add('!border-yellow-700')
						passwordInput.nextElementSibling.classList.add('!text-yellow-700')
						passwordInput.nextElementSibling.classList.remove(
							'!text-green-400',
							'!text-red-500'
						)
					} else if (requirementArray.length === 1) {
						setPasswordValidProgress(
							'add',
							['w-full', 'w-1/2', '!bg-green-400'],
							['w-2/3', '!bg-yellow-700'],
							'!text-green-400',
							'!text-yellow-700',
							'Fair'
						)
						passwordInput.classList.remove(
							'!border-green-400',
							'!border-red-500'
						)
						passwordInput.classList.add('!border-yellow-700')
						passwordInput.nextElementSibling.classList.add('!text-yellow-700')
						passwordInput.nextElementSibling.classList.remove(
							'!text-green-400',
							'!text-red-500'
						)
					} else {
						setPasswordValidProgress(
							'remove',
							['w-1/2', 'w-2/3', '!bg-yellow-700'],
							['w-full', '!bg-green-400'],
							'!text-yellow-700',
							'!text-green-400',
							'Too Weak'
						)
						passwordInput.classList.remove(
							'!border-green-400',
							'!border-yellow-700',
							'!border-red-500'
						)
						passwordInput.classList.add('!border-red-500')
						passwordInput.nextElementSibling.classList.add('!text-red-500')
						passwordInput.nextElementSibling.classList.remove(
							'!text-yellow-700',
							'!text-green-400'
						)
					}

					if (requirementArray.length > 0) {
						requirementPar.textContent = `Your password requires ${requirementArray.join(', ').replace(/,([^,]*)$/, ' & $1')}`
					} else {
						requirementPar.textContent = 'Your Password is secure!'
					}
				}

				passwordInput.addEventListener('input', updateRequirementText)
			})
		</script>
	</body>
</html>
